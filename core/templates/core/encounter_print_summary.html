{% load i18n static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{% trans "Encounter Summary" %} — {{ encounter.patient.first_name }} {{ encounter.patient.last_name }}</title>
    <style>
        body { font-family: serif; max-width: 700px; margin: 40px auto; padding: 0 20px; color: #111; }
        h1 { font-size: 18px; margin-bottom: 4px; }
        .clinic { font-size: 13px; color: #555; margin-bottom: 24px; }
        .divider { border-top: 1px solid #ccc; margin: 16px 0; }
        .field { margin-bottom: 8px; font-size: 14px; }
        .label { font-weight: bold; }
        .section-title { font-size: 15px; font-weight: bold; margin: 20px 0 8px; }
        .content { white-space: pre-wrap; font-size: 14px; line-height: 1.5; }
        .footer { margin-top: 48px; font-size: 12px; color: #888; text-align: center; }
        .signature { margin-top: 48px; text-align: center; }
        .signature-line { border-top: 1px solid #333; width: 250px; margin: 0 auto 4px; }
        .signature-name { font-size: 14px; }
        .signature-crm { font-size: 12px; color: #555; }
        @media print { .no-print { display: none; } }
    </style>
</head>
<body>
    <div class="no-print" style="margin-bottom: 16px;">
        <button onclick="window.print()" style="padding: 8px 16px; cursor: pointer;">{% trans "Print Summary" %}</button>
        <a href="{% url 'encounter-detail' encounter.pk %}" style="margin-left: 8px;">{% trans "Back" %}</a>
    </div>

    <h1>{% trans "Encounter Summary" %}</h1>
    {% if encounter.clinic %}
    <div class="clinic">{{ encounter.clinic.name }}</div>
    {% endif %}

    <div class="divider"></div>

    <div class="field"><span class="label">{% trans "Patient" %}:</span> {{ encounter.patient.first_name }} {{ encounter.patient.last_name }}</div>
    <div class="field"><span class="label">{% trans "Date of birth" %}:</span> {{ encounter.patient.date_of_birth }}</div>
    <div class="field"><span class="label">{% trans "Doctor" %}:</span> {{ encounter.doctor }}</div>
    <div class="field"><span class="label">{% trans "Date/Time" %}:</span> {{ encounter.scheduled_at|date:"d/m/Y H:i" }}</div>
    <div class="field"><span class="label">{% trans "Reason" %}:</span> {{ encounter.reason }}</div>

    <div class="divider"></div>

    <div class="section-title">{% trans "Anamnesis" %}</div>
    <div class="content">{{ encounter.anamnesis|default:"—" }}</div>

    <div class="section-title">{% trans "Prescription" %}</div>
    <div class="content">{{ encounter.prescription|default:"—" }}</div>

    <div class="signature">
        <div class="signature-line"></div>
        <div class="signature-name">{{ encounter.doctor }}</div>
        <div class="signature-crm">CRM {{ encounter.doctor.license_number }}</div>
    </div>

    <div class="footer">{{ encounter.scheduled_at|date:"d/m/Y H:i" }}</div>
</body>
</html>
